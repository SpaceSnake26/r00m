{% extends "layout.html" %}

{% block content %}
<!-- Outer World: Just the Doors -->
<div class="door-container perspective-container">
    <div class="door-wrapper" id="door-wrapper">
        <div class="lift-door door-left">
            <div class="door-window"></div>
            <div class="door-handle"></div>
        </div>
        <div class="lift-door door-right">
            <div class="door-window"></div>
            <div class="door-handle"></div>
        </div>
        <div class="door-gap"></div>
    </div>

    <div class="overlay-ui">
        <!-- Optional: "Call Lift" button or just "Enter"? User said "Eintreten" -->
        <!-- Optional: "Call Lift" button or just "Enter"? User said "Eintreten" -->
        <button class="btn enter-btn" onclick="openLift()">EINTRETEN</button>
        <br><br>
        <button class="btn enter-btn" style="font-size: 1rem; padding: 10px 20px;" onclick="toggleAvatar()">Change
            View</button>
    </div>

    <!-- Avatar Selection Overlay -->
    <div class="avatar-selection-overlay" id="avatar-overlay">
        <div class="avatar-selection-title">Select Your Avatar</div>
        <div class="avatar-grid">
            <!-- 6 Avatars -->
            <div class="avatar-item" onclick="selectAvatar('avatar_1.png')">
                <img src="/static/img/avatars/avatar_1.png" alt="Avatar 1">
            </div>
            <div class="avatar-item" onclick="selectAvatar('avatar_2.png')">
                <img src="/static/img/avatars/avatar_2.png" alt="Avatar 2">
            </div>
            <div class="avatar-item" onclick="selectAvatar('avatar_3.png')">
                <img src="/static/img/avatars/avatar_3.png" alt="Avatar 3">
            </div>
            <div class="avatar-item" onclick="selectAvatar('avatar_4.png')">
                <img src="/static/img/avatars/avatar_4.png" alt="Avatar 4">
            </div>
            <div class="avatar-item" onclick="selectAvatar('avatar_5.png')">
                <img src="/static/img/avatars/avatar_5.png" alt="Avatar 5">
            </div>
            <div class="avatar-item" onclick="selectAvatar('avatar_6.png')">
                <img src="/static/img/avatars/avatar_6.png" alt="Avatar 6">
            </div>
            <div class="avatar-item" onclick="selectAvatar('avatar_7.png')">
                <img src="/static/img/avatars/avatar_7.png" alt="Avatar 7">
            </div>
        </div>
        <button class="btn enter-btn" style="margin-top: 20px; font-size: 1rem;"
            onclick="closeAvatarSelection()">Close</button>
    </div>

    <!-- Active Avatar Display (Originally Hidden) -->
    <img id="user-avatar" src="" alt="User Avatar">
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/door.js"></script>
<script>
    function toggleAvatar() {
        const overlay = document.getElementById('avatar-overlay');
        overlay.classList.add('active');
    }

    function closeAvatarSelection() {
        const overlay = document.getElementById('avatar-overlay');
        overlay.classList.remove('active');
    }

    function selectAvatar(filename) {
        const avatarImg = document.getElementById('user-avatar');
        avatarImg.src = '/static/img/avatars/' + filename;
        avatarImg.classList.add('avatar-active'); // Show the avatar

        // Close selection and Open Lift immediately
        closeAvatarSelection();
        openLift();
    }
</script>
{% endblock %}