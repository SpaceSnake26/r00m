{% extends "layout.html" %}

{% block content %}
<div class="lift-interior">
    <div style="font-size: 0.8rem; opacity: 0.5; margin-bottom: 20px; letter-spacing: 2px;">LIFT 5012 // TRANSIT</div>

    <div class="panel-glass">
        <!-- Puzzle Selection or Active Puzzle -->
        <!-- We can reuse 'puzzles.html' logic or embed detailed puzzle here via AJAX or iframe?
             Let's keep it simple: Render list OR render specific puzzle if selected?
             Prompt says: "Im Lift befindet sich das Terminal/Panel, auf dem man EIN Rätsel lösen muss."
             "Der Spieler darf das Rätsel wählen"
             
             Let's use a simple tab interface or list -> detail within the same page to avoid reload?
             Or just keep routes /lift?puzzle_id? 
             Actually routes.py just serves /lift. We can load puzzle content dynamically.
        -->

        <div id="lift-content">
            <h2 style="text-align:center; margin-bottom:20px;">SECURITY PROTOCOL</h2>
            <div class="puzzle-grid" style="grid-template-columns: repeat(3, 1fr); gap: 10px;">
                {% for p in puzzles %}
                <button class="btn" style="width:100%; height:80px;" onclick="loadPuzzle({{ p.id }})">
                    <div style="font-size:1.5rem;">{{ p.id }}</div>
                    <div style="font-size:0.7rem;">{{ p.name }}</div>
                </button>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- Container for active puzzle overlay/modal -->
<div id="active-puzzle-modal" class="hidden full-screen"
    style="background:rgba(0,0,0,0.95); z-index:100; display:flex; justify-content:center; align-items:center;">
    <div class="panel-glass" style="max-width:500px;">
        <button onclick="closePuzzle()" style="float:right; background:none; border:none; color:white;">X</button>
        <div id="puzzle-frame"></div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    async function loadPuzzle(id) {
        // We could fetch the puzzle detail HTML fragment or just redirect to a puzzle view?
        // But we want to stay "in the lift".
        // Let's redirect to /puzzles/{id} but redesign that page to look like "Lift Panel"?
        // OR fetch the content. Fetching content is cleaner for SPA feel.
        // BUT we have jinja templates.
        // Easiest: Just go to /puzzles/id which now renders "lift_puzzle.html"?
        // Let's just use window.location for now, assuming /puzzles/{id} extends layout.
        // We update /puzzles/{id} template to match "Lift" style?
        // Actually, user said: "Puzzle UI eingebettet in ein Terminal/Panel"
        // So let's redirect to separate page but keep styling consistent.
        window.location.href = "/puzzles/" + id;
    }
</script>
{% endblock %}